name: Deploy dev to production

on:
  workflow_dispatch:

jobs:
  execute-ssh:
    runs-on: ubuntu-latest
    steps:
    - name: Executing remote SSH commands
      uses: appleboy/ssh-action@master
      with:
        host: 54.146.155.66 #host behind the cloudfront distrobution
        username: bitnami
        key: ${{ secrets.DEV_SERVER_SSH_KEY }}
        script: |
          echo "Dumping database tables"
          /bitnami/wordpress/wp-content/migration/dump_db.sh
